<div class="container">
  <div class="row">
    <div class="col-lg-2">
      <%= render partial: "layouts/sidebar" %>
    </div>
    <div class="col-lg-8">
      <h2 class="mt-5 mb-3 bg-secondary text-light p-3 d-inline-block rounded">戯曲一覧 <i class="fas fa-book-open" style="color: #fbff00;"></i></h2>
      <%= form_with url: theaters_path, method: :get, local: true, class:"form-inline" do |f| %>
        <%= f.hidden_field :sort_theater, value: @theaters %>
        並び替え
        <% if @sorted.present? %>
          <%= f.select :sort, @sort_list, selected: @sorted, onChange: "javascript: this.form.submit();", class:"form-inline ml-2" %>
        <% else %>
          <%= f.select :sort, @sort_list, {}, onChange: "javascript: this.form.submit();", class:"form-inline ml-2" %>
        <% end %>
      <% end %>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>題名</th>
            <th>作者</th>
            <th>男</th>
            <th>女</th>
          </tr>
        </thead>
        <tbody>
          <% @theaters.each do |theater| %>
            <tr>
              <td scope="row" ><%= link_to theater_path(theater) do %><%= theater.title %><% end %></td>
              <td><%= theater.writer %></td>
              <td><%= theater.man %></td>
              <td><%= theater.female %></td>
              <td>
                <%= link_to favorite_theater_path(theater), method: :post, class:"btn btn-warning text-secondary" do %>
                  <i class="fa fa-heart"></i><%= current_user.likes?(theater) ? "お気に入り解除" : "お気に入り" %>
                <% end %>
              </td>
              <td><%= link_to "編集", edit_theater_path(theater), class:"btn btn-outline-secondary" %></td>
              <td><%= link_to "削除", theater_path(theater), method: :delete, data: { confirm: '戯曲を削除しますが、よろしいですか？' }, class:"btn btn-outline-danger" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
      <%= paginate @theaters %>
      <%= link_to "戯曲を登録する", new_theater_path, class:"btn btn-primary w-25 mt-3" %>
    </div>
  </div>
</div>
